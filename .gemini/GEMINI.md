# プロジェクト固有ルール

プロジェクト名: **todo** (React + TypeScript Webアプリケーション)

---

## 1) 言語／ランタイム

- 言語: **TypeScript (React)**
- 推奨実行環境: **Node.js 18+ / Vite 7.x**
- パッケージマネージャー: **npm**

---

## 2) 主要ツール／チェック

| ツール              | コマンド                                    |
| ------------------- | ------------------------------------------- |
| フォーマッタ        | Prettier (エディタ設定)                     |
| Linter / 型チェック | `npm run lint` (ESLint + typescript-eslint) |
| 型チェック単体      | `tsc -b` または `tsc --noEmit`              |
| テスト              | `npm test` (Vitest)                         |
| ビルド              | `npm run build`                             |
| 開発サーバー        | `npm run dev`                               |

### CI コマンド（必須チェック）

```bash
npm run lint && tsc -b && npm test && npm run build
```

---

## 3) ファイル参照形式

- 参照形式: `path/to/file.ts:123`（行番号必須）
- 例: `src/lib/scheduler.ts:45`

---

## 4) コーディング規約（必須）

- **型注釈**: すべての公開関数に型注釈を必須
- **`any` 禁止**: `any` を避け、`unknown` または具体的な型を使用
- **パス操作**: Node.js の `path` モジュールを使用（クロスプラットフォーム対応）
- **Docstring**: TSDoc 形式、**日本語**で記述
- **コメント**: 複雑なロジックには**日本語コメント**で意図と根拠を記載

### TSDoc テンプレート

```typescript
/**
 * (機能の目的を日本語で記述)
 *
 * @param param1 - (パラメータの説明を日本語で記述)
 * @returns (戻り値の説明を日本語で記述)
 * @throws {Error} (失敗条件を日本語で記述)
 */
```

---

## 5) エラー処理方針

- **Fail-fast**: 無効な入力や前提条件違反は即座に明確なエラーをスロー
- **エラー型**: `Error`, `TypeError`, またはカスタムエラークラスを使用
- **ログ方針**: キーイベントとエラーを日本語で記述、オプションで JSON 構造化ログ

---

## 6) テスト方針

- **テストフレームワーク**: Vitest + Testing Library
- **テスト記述**: `describe`, `it` の説明は**日本語**で記述
- **ネットワーク呼び出し**: 本番呼び出し禁止、モックまたはローカルテストデータを使用
- **テストデータ命名**: 意味のある**日本語名**を使用（例: `sample_user_田中.json`）
- **カバレッジ**: コアロジックは必須、境界条件・エラーケースを含める

### テストファイルヘッダーテンプレート

```typescript
// 前提条件:
// - Node.js 18+
// - 依存関係インストール済み: npm install
// 目的: (テストの目的を日本語で記述)
```

---

## 7) その他の注意点

- **秘密情報**: ハードコード禁止、発見時は即座に報告
- **依存の固定**: `package.json` でバージョン固定（プロジェクト慣例に従う）
- **PR**: 小さく単一目的、PR説明は**日本語**
- **TODO/ダミー実装禁止**: やむを得ない場合は理由を明記しユーザー承認を求める

### プロジェクト固有の技術スタック

| カテゴリ       | 技術                                   |
| -------------- | -------------------------------------- |
| フロントエンド | React 19                               |
| 状態管理       | TanStack React Query                   |
| バックエンド   | Supabase (PostgreSQL + Edge Functions) |
| ビルドツール   | Vite                                   |
| PWA            | vite-plugin-pwa                        |
| 日付操作       | date-fns                               |

---

## 8) 出力言語

- **日本語**

---

## 参考リンク

- 詳細なコーディングルール: [TYPESCRIPT_RULES.md](file:///Users/yappa/code/web-app/todo/TYPESCRIPT_RULES.md)
